<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Programación Lineal</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="bg-light">
    <div class="container mt-5">
        <h1 class="text-center mb-4">Resolver Problemas de Programación Lineal</h1>
        
        <!-- Formulario para ingresar todos los datos -->
        <form id="formulario">
            <div class="mb-3">
                <label for="objetivo" class="form-label">Función Objetivo (ej: -40,-50):</label>
                <input type="text" class="form-control" id="objetivo" name="objetivo" placeholder="Ejemplo: -40,-50" required>
            </div>
            <div class="mb-3">
                <label for="restricciones" class="form-label">Restricciones (ej: 2,3;4,2):</label>
                <input type="text" class="form-control" id="restricciones" name="restricciones" placeholder="Ejemplo: 2,3;4,2" required>
            </div>
            <div class="mb-3">
                <label for="lados" class="form-label">Lados Derechos (ej: 120,160):</label>
                <input type="text" class="form-control" id="lados" name="lados" placeholder="Ejemplo: 120,160" required>
            </div>
            <button type="submit" class="btn btn-primary">Resolver</button>
        </form>

        <!-- Resultados -->
        <div id="resultados" class="mt-4"></div>
    </div>

    <script>
        document.getElementById('formulario').addEventListener('submit', async (e) => {
            e.preventDefault(); // Evitar el envío tradicional del formulario

            const formData = new FormData(e.target);
            const datos = {};

            formData.forEach((value, key) => {
                datos[key] = value;
            });

            try {
                // Enviar los datos al servidor
                const response = await fetch('/resolver', {
                    method: 'POST',
                    body: new URLSearchParams(datos)
                });
                const data = await response.json();

                const resultadosDiv = document.getElementById('resultados');
                resultadosDiv.innerHTML = '';

                // Mostrar los resultados
                if (data.error) {
                    resultadosDiv.innerHTML = `<div class="alert alert-danger">${data.error}</div>`;
                } else {
                    resultadosDiv.innerHTML = `
                        <div class="alert alert-success">
                            <h4>Resultados:</h4>
                            <p>${data.variables.join('<br>')}</p>
                            <p>${data.funcion_objetivo}</p>
                        </div>
                    `;
                }
            } catch (err) {
                console.error('Error al enviar los datos:', err);
                alert('Ocurrió un error en la comunicación con el servidor.');
            }
        });
    </script>
</body>
</html>
